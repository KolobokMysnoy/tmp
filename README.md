# [Задание](https://docs.google.com/document/d/1QaQ-Nc_eE4dBKZwQbA4E2o8pOJ3CktgsKDAn375iY24/edit) 

***Вариант 5***

1. Проксирование HTTP запросов - 5 баллов
2. Проксирование HTTPS запросов 5 баллов
3. Повторная отправка проксированных запросов - 5 баллов
4. Dirbuster – заменить путь (/path/...) по очереди на каждую строчку из словаря https://github.com/maurosoria/dirsearch/blob/master/db/dicc.txt
в качестве результата вывести все файлы, которые вернули не 404 код ответа

## 1. Проксирование HTTP запросов

1. Нужно отправить сообщение на http://mail.ru

2. Необходимо:
    - считать хост и порт из первой строчки
    - заменить путь на относительный
    - удалить заголовок Proxy-Connection
Отправить на считанный хост (mail.ru:80) получившийся запрос

3. Перенаправить все, что будет получено в ответ
4. Проверить, что
    - проксируются все типы запросов (GET, POST, HEAD, OPTIONS)
    - проксируются все заголовки
    - корректно возвращаются все коды ответов (200, 302, 404)

## 2. Проксирование HTTPS запросов
Должны успешно проксироваться https запросы. В настройках браузера указать http/https прокси, добавить в ОС корневой сертификат, все сайты должны работать корректно.
Запрос curl -x http://127.0.0.1:8080 https://mail.ru (8080 – порт, на котором запущена программа) должен обрабатываться следующим образом:
- На 8080 порт придет в открытом виде запрос CONNECT https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/CONNECT 

Необходимо считать хост и порт (mail.ru 443) из первой строчки.
Необходимо сразу вернуть ответ (сокет не закрывать, использовать его для последующего зашифрованного соединения)

Необходимо считать хост и порт (mail.ru 443) из первой строчки.
Необходимо сразу вернуть ответ (сокет не закрывать, использовать его для последующего зашифрованного соединения)

## 3. Повторная отправка проксированных запросов

1. Пользовательский запрос:
    * HTTP метод (GET/POST/PUT/HEAD)
    * Путь и GET параметры
    * Заголовки, при этом отдельно парсить Cookie
    * Тело запроса, в случае application/x-www-form-urlencoded отдельно распасить POST параметры

2. Ответ: 
    * Ответы необходимо сохранять также в распаршеном виде
    * Не забыть про gzip и другие методы сжатия! (можно либо расшифровывать их, либо изменять заголовки на стороне прокси)

***Убедиться, что получается записать запрос на авторизацию на сайте mail.ru и заново его отправить***

## 4. Вариант 5

Вывести все ответы от сервера, которые выдают не 404 ошибку.